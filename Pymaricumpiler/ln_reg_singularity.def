Bootstrap: library
From: ubuntu:18.04

%environment
    # avoid warning about inability to change locale on savio
    #LC_ALL="C"
    #export LC_ALL

%files
    /home/henry/GitRepos/LymphoSight/ /GitRepos/LymphoSight
    /home/henry/GitRepos/IMSWriter/ /GitRepos/IMSWriter

%post -c /bin/bash
    apt-get -y update

    #vim
    apt-get -y install vim

    #install python
    apt-get -y install python3.6 

    #install pip3
    apt-get -y install software-properties-common
    apt-add-repository universe
    apt-get update
    apt-get -y install python3-pip
    
    #install python packages
    pip3 install numpy 
    pip3 install scipy 
    pip3 install PIL
    pip3 install tensorflow==1.12.0
    pip3 install pygellan
    pip3 install py4j


    #instal java
    apt-get install -y openjdk-8-jre-headless


    #allow access to scratch
    mkdir -p /global/scratch
    mkdir -p /global/home/users



%environment
    export PYTHONPATH=/GitRepos/IMSWriter
    


